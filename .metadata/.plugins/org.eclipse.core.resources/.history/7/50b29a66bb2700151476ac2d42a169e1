package main;



public class Solution {
	public static boolean isMatch(String s, String p) {
        return dp(s, p, 0, 0);
    }
	
	
	
	static boolean dp(String s, String p, int spos, int ppos) {
		if(p.length() == ppos)
			return s.length() == spos;
		
		if(p.charAt(ppos) != '*') {
			if(s.length() == spos)
				return false;
			
			
			if(p.charAt(ppos) == '?' || p.charAt(ppos) == s.charAt(spos))
				return dp(s, p, spos+1, ppos+1);
			
			else return false;
			
			
		}
		
		else {
			int cur = spos;
			
			while(s.length() > spos && s.charAt(spos) == s.charAt(cur)) {
				spos++;
			}
			if(dp(s, p, spos, ppos+1))
				return true;
			
			
			
			while(s.length() > spos && s.charAt(spos) == s.charAt(cur)) {
				
				
				
				if(dp(s, p, spos, ppos+1))
					return true;
				spos++;
			}
			
			return dp(s, p, spos, ppos+1);
					
		}
		
		
	}
	
	
	public static void main(String[] args) {
		System.out.println(isMatch("abefcdgiescdfimde", "ab*cd?i*de"));
	}
}
