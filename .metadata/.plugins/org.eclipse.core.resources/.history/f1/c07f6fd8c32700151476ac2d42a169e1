package main;



public class Solution {
	public static boolean isMatch(String s, String p) {
        return dp(s, p, 0, 0);
    }
	
	
	
	static boolean dp(String s, String p, int spos, int ppos) {
		if(p.length() == ppos)
			return s.length() == spos;
		
		if(p.charAt(ppos) != '*') {
			if(s.length() == spos)
				return false;
			
			
			if(p.charAt(ppos) == '?' || p.charAt(ppos) == s.charAt(spos))
				return dp(s, p, spos+1, ppos+1);
			
			else return false;
			
			
		}
		
		else {
		
			while(ppos < p.length()-1 && p.charAt(ppos+1) == '*')
				ppos++;
			
			while(s.length() > spos ) {
				
				
				
				if(dp(s, p, spos, ppos+1))
					return true;
				spos++;
			}
			
			return dp(s, p, spos, ppos+1);
					
		}
		
		
	}
	
	
	public static void main(String[] args) {
		System.out.println(isMatch("abbabaaabbabbaababbabbbbbabbbabbbabaaaaababababbbabababaabbababaabbbbbbaaaabababbbaabbbbaabbbbababababbaabbaababaabbbababababbbbaaabbbbbabaaaabbababbbbaababaabbababbbbbababb", "**aa*****ba*a*bb**aa*ab****a*aaaaaa***a*aaaa**bbabb*b*b**aaaaaaaaa*a********ba*bbb***a*"));
	}
}
